<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--  Í≥µÌÜµÏúºÎ°ú Î¨∂Ïñ¥Ïïº ÌïòÎäî Î∂ÄÎ∂Ñ  -->
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" href="/common/css/common/FormUtility.css">
    <link rel="stylesheet" href="/common/css/common/index.css">
    <link rel="stylesheet" href="/common/css/common/api.css">

    <link rel="stylesheet" href="/assets/fontawesome/css/all.css">

    <script type="text/javascript" src="/common/js/jquery/jquery3.6.0.js"></script>
    <script type="text/javascript" src="/common/js/common/FormUtility.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/GridSortManager.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/GridUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/CommonUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/ValidationUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/PopupUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/FormatUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/FileUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/PageUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/CalendarUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/ChartUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/TabUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/KeyPadUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/DocumentsForm.js"></script>
    <script type="text/javascript" src="/common/js/common/Common.js"></script>
    <script type="text/javascript" src="/common/js/common/Api.js"></script>
    <script type="text/javascript" src="/common/js/common/CommonTag.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/InputTagUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/InputMaskUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/DateTagUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/SelectTagUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/AddressTagUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/TagValidationUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/utils/SliderUtils.js"></script>
    <script type="text/javascript" src="/common/js/common/JwtUtils.js"></script>
    <script type="text/javascript" src="/common/js/axios/axios.js"></script>
    <script type="text/javascript" src="/common/js/common/AxiosConfig.js"></script>
    <script type="text/javascript" src="/common/js/common/InputUtility.js"></script>
    <script type="text/javascript" src="/common/js/messageConfig.js"></script>

    <!-- kakao ÏßÄÎèÑ -->
    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=08b7a9bdd253ada6f1d65275b08aec58&libraries=services"></script>

    <!-- kakao Ï£ºÏÜåÍ≤ÄÏÉâ -->
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

    <!-- Quill.js ÏõπÏóêÎîîÌÑ∞ -->
    <script src="/assets/quill/quill.js"></script>
    <link href="/assets/quill/quill.snow.css" rel="stylesheet">
    <script src="/assets/quill/image-resize.min.js"></script>
    <!-- SheetJS (Excel Download) -->
    <script src="/assets/excel/xlsx.full.min.js"></script>
</head>

<body>
    <main class="gi-main2">
        <nav class="gi-side-nav expand">
            <div class="gi-side-nav-toggle-button-area">
                <span class="gi-side-nav-toggle-button">
                    <i class="gi-cursor-pointer fa-inverse fa-solid fa-angles-left gi-side-nav-toggle-icon"></i>
                </span>
            </div>
            <div class="gi-row-100 gi-side-nav-logo-area">
                <a href="" id="gi-logo2" class="gi-side-nav-logo"></a>
            </div>
            <div class="gi-row-90">
                <ul class="gi-ul gi-flex gi-flex-justify-content-space-evenly" id="menu">
                    <!--Î©îÎâ¥ÏÇΩÏûÖÏòÅÏó≠-->
                </ul>
            </div>
            <!-- Ïó¨Í∏∞Ïóê search, Ïú†Ï†Ä ÏòÅÏó≠ Ï∂îÍ∞Ä -->
            <article class="gi-col-auto side-nav-profile-container collapsed">
                <div class="side-nav-profile-dropdown">
                    <div class="side-nav-profile-trigger">
                        <div class="profile-info-frame">
                            <img id="user-image" class="profile-picture" src="/common/img/userIcon.png"
                                alt="user image" />
                            <div class="profile-info">
                                <span class="profile-name"><span id="user-name-span"></span> Îãò</span>
                                <span class="profile-name "><span id="office-name-span"></span></span>
                            </div>
                        </div>
                        <span class="profile-name"><i class="fas fa-angle-right gi-margin-5px"></i></span>
                    </div>
                    <div class="dropdown-menu">
                        <a id="myinfo-btn" href="#"><i class="fa-regular fa-user"></i><span>ÎÇ¥ Ï†ïÎ≥¥ ÏàòÏ†ï</span></a>
                        <hr />
                        <a id="logout-btn" href="#"><i
                                class="fa-solid fa-arrow-right-from-bracket"></i><span>Î°úÍ∑∏ÏïÑÏõÉ</span></a>
                    </div>
                </div>
            </article>
            <div class="gi-language-trigger" id="languageTrigger">
                <i class="fa-solid fa-globe"></i>
                <span class="gi-current-lang" id="currentLangCode">KO</span>
                <!-- Ïñ∏Ïñ¥ ÏÑ†ÌÉù Ìå®ÎÑê - Î≤ÑÌäº ÎÇ¥Î∂ÄÏóê ÏúÑÏπò -->
                <article class="gi-home-setting-article lang-panel-closed">
                    <div class="gi-language-selector">
                        <div class="gi-language-label">
                            <i class="fa-solid fa-earth-asia"></i>
                            <span>Language</span>
                        </div>
                        <div class="gi-language-toggle" id="languageToggle">
                            <div class="gi-language-slider" id="languageSlider"></div>
                            <button type="button" class="gi-language-option active" data-lang="ko">
                                <span class="gi-lang-flag">üá∞üá∑</span>
                                <span class="gi-lang-text">ÌïúÍµ≠Ïñ¥</span>
                            </button>
                            <button type="button" class="gi-language-option" data-lang="mn">
                                <span class="gi-lang-flag">üá≤üá≥</span>
                                <span class="gi-lang-text">–ú–æ–Ω–≥–æ–ª</span>
                            </button>
                            <button type="button" class="gi-language-option" data-lang="en">
                                <span class="gi-lang-flag">üá∫üá∏</span>
                                <span class="gi-lang-text">English</span>
                            </button>
                        </div>
                    </div>
                </article>
            </div>

            <div class="gi-row-100 gi-col-70" id="side_nav_menu_container">
                <ul class="gi-row-98 gi-col-100 gi-overflow gi-ul" id="side_nav_menu"></ul>
            </div>
            <div class="gi-row-100 gi-col-auto gi-margin-top-5 scroll-check-icon">
                <i class="fa-solid fa-beat-fade fa-angles-down"></i>
            </div>
        </nav>
        <section id="gi-road-content" class="gi-main-content gi-col-100 gi-row-100 gi-flex gi-side-nav-toggle expand"
            data-animation="false" data-side-nav-toggle-area></section>
    </main>
</body>

</html>
<article id="commonTag">
    <div class="confirm"></div>
    <div class="alertPopupBody"></div>
    <div class="PopupBody"></div>
    <div class="showMessage"></div>
    <div id="loadingScreenBody" class="">
        <div id="screenBody" class=""></div>
    </div>
    <div id="formUtil_fileUpload"></div>
    <div id="formUtil_uncutFileUpload"></div>
    <div id="giDatepickerBody"></div>
</article>
<script>
    new loadToScript();
    let formUtil = new FormUtility();
    var commonTag = new CommonTag();
    var dataBinding = new DataBinding();
    var popup = new Popup();
    var changedHomeType = true;
    var common_session = new Session();
    var menuInfoList = "";
    var input = new InputUtility();
    layoutInit();

    function layoutInit() {
        layoutClickEvent();
        sideNaveOpenCloseEvent();
        findByMenuList();
        findUserName();
        initLanguageSelector();
    }
    function layoutClickEvent() {
        /**
         * NOTE: ÌîÑÎ°úÌïÑ ÏÇ¨Ïù¥ÎìúÎÑ§ÎπÑ OPEN
         * */
        $(".side-nav-profile-trigger").on("click", function (e) {
            dropDownMenu("open");
            isDropMenuOpenSetClose();
        });

        /**
         * NOTE: Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäº Ïù¥Î≤§Ìä∏
         */
        $("#logout-btn").off().on("click", function () {
            $("body").removeClass('animate-content-end');
            setTimeout(function () {
                $("body").addClass('animate-content-start');
                window.location.href = "/api/v1/auth/logout";
            });
        });
    }

    //NOTE : ÎÇ¥Ï†ïÎ≥¥ Î©îÎâ¥ Ïù¥Î≤§Ìä∏
    function dropDownMenu(flag) {
        if (flag === "open") {
            $(".dropdown-menu").stop(true, true).slideToggle(150).css("display", "flex");
            $(".side-nav-profile-dropdown").toggleClass("active");
            $(".side-nav-profile-trigger").toggleClass("active");
        } else if (flag === "close") {
            $(".dropdown-menu").stop(true, true).slideToggle(150).css("display", "none");
            $(".side-nav-profile-dropdown").removeClass("active");
            $(".side-nav-profile-trigger").removeClass("active");
        }
    }
    function findUserName() {
        const email = JwtUtils.getUserEmailFromJWT();
        const url = "/cms/common/sysUser/find";

        axios.post(url, { email }).then(response => {
            const data = response.data[0];
            $('#user-name-span').text(data.user_name).css('font-size', '1rem');
            $('#office-name-span').text(data.office_name).css('font-size', '0.8rem');
        }).catch(error => {
            formUtil.showMessage("can not find user name");
        });
    }

    /**
     * NOTE: Î©îÎâ¥Î∞î OPEN,CLOSE EVENT(ÎÖ∏Ï∂ú or Ïà®ÍπÄ)
     */
    function sideNaveOpenCloseEvent() {
        let giSideNavToggleButtonArea = $(".gi-side-nav-toggle-button-area");
        /**
         * NOTE: BTN HOVER EVENT
         */
        giSideNavToggleButtonArea.hover(
            function () {
                $(this).find("i").addClass("fa-beat-fade"); // hover Ïãú fa-fade ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä
            },
            function () {
                $(this).find("i").removeClass("fa-beat-fade"); // hover Ìï¥Ï†ú Ïãú fa-fade ÌÅ¥ÎûòÏä§ Ï†úÍ±∞
            }
        );

        giSideNavToggleButtonArea.on("click", function () {
            let $toggleButton = $(this);

            if ($toggleButton.hasClass("collapsed")) {
                $toggleButton.removeClass("collapsed");
                $(".main-nav-menu").removeClass("visible");
                $(".gi-main-nav-logo-area").removeClass("visible");
                $(".gi-side-nav").removeClass("collapsed").addClass("expand");
            } else {
                $toggleButton.addClass("collapsed");
                $(".main-nav-menu").addClass("visible");
                $(".gi-main-nav-logo-area").addClass("visible");
                $(".gi-side-nav").removeClass("expand").addClass("collapsed");
            }

            let mainArea = $("[data-side-nav-toggle-area]");

            // sideNav, mainArea handling
            mainArea.each(function () {
                if ($(this).hasClass("expand")) {
                    $(this).removeClass("expand");
                    $(this).addClass("collapsed");
                } else {
                    $(this).removeClass("collapsed");
                    $(this).addClass("expand");
                }
            });

            // popup area handling
            $("#gi-search-popup").toggleClass("gi-row-84-important");
        });
    }

    /**
     * NOTE : Î©îÎâ¥Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå
     */
    function findByMenuList() {
        let url = "/cms/common/sysMenu/findAccessRightGroupForMenu";
        let param = {};
        axios.post(url, param).then(response => {
            let status = response.status;
            if (status === 200) {
                let data = response.data;
                let sideNavMenuList1Depth = [];
                let sideNavMenuList2Depth = [];
                let sideNavMenuList3Depth = [];

                let menuTree = [];
                let menuMap = {};

                // ÌòÑÏû¨ Ïñ∏Ïñ¥ ÏÑ§Ï†ï Í∞ÄÏ†∏Ïò§Í∏∞
                const currentLang = localStorage.getItem("selectedLanguage") || "ko";

                data.sort((a, b) => parseInt(a.menu_level) - parseInt(b.menu_level));

                data.map((item) => {
                    if (!formUtil.checkEmptyValue(item.menu_level)) {
                        formUtil.alertPopup("item.menu_level is undefined");
                        return false;
                    }

                    // Ïñ∏Ïñ¥Ïóê Îî∞Î•∏ Î©îÎâ¥Î™Ö Í≤∞Ï†ï
                    let menuName = item.menu_name_kr;
                    if (currentLang === "mn" && item.menu_name_mn) menuName = item.menu_name_mn;
                    else if (currentLang === "en" && item.menu_name_en) menuName = item.menu_name_en;

                    switch (item.menu_level) {
                        case '0':
                            sideNavMenuList1Depth.push({
                                menu_code: item.menu_code,
                                top_menu_code: item.top_menu_code,
                                menu_name: menuName,
                                menu_level: item.menu_level,
                                url: item.URL,
                                menu_icon: item.menu_icon,
                                menu_number: item.menu_number
                            });
                            break;

                        case '1':
                            sideNavMenuList2Depth.push({
                                menu_code: item.menu_code,
                                top_menu_code: item.top_menu_code,
                                menu_name: menuName,
                                menu_level: item.menu_level,
                                url: item.url,
                                menu_icon: item.menu_icon,
                                menu_number: item.menu_number
                            });
                            break;

                        case '2':
                            sideNavMenuList3Depth.push({
                                menu_code: item.menu_code,
                                top_menu_code: item.top_menu_code,
                                menu_name: menuName,
                                menu_level: item.menu_level,
                                url: item.url,
                                prgm_url: item.prgm_url,
                                menu_icon: item.menu_icon,
                                menu_number: item.menu_number
                            });
                            break;
                    }
                    //NOTE: menu_number Ïóê Îî∞Î•∏ ÏàúÏÑú Ï†ïÎ†¨ ÏÑ§Ï†ï
                    sideNavMenuList1Depth.sort((a, b) => Number(a.menu_number) - Number(b.menu_number));
                    sideNavMenuList2Depth.sort((a, b) => Number(a.menu_number) - Number(b.menu_number));
                    sideNavMenuList3Depth.sort((a, b) => Number(a.menu_number) - Number(b.menu_number));

                    let menuItem = {
                        menu_code: item.menu_code,
                        top_menu_code: item.top_menu_code,
                        menu_name: menuName,
                        menu_level: item.menu_level,
                        url: item.url,
                        menu_icon: item.menu_icon,
                        children: [] // ÌïòÏúÑ Î©îÎâ¥Î•º Îã¥ÏùÑ Î∞∞Ïó¥
                    };

                    menuMap[item.menu_code] = menuItem; // Í≤ÄÏÉâÏùÑ Îπ†Î•¥Í≤å ÌïòÍ∏∞ ÏúÑÌïú Îßµ

                    // ÏµúÏÉÅÏúÑ Î©îÎâ¥ (level 0)
                    if (item.menu_level === "0") {
                        menuTree.push(menuItem);
                    } else {
                        // Î∂ÄÎ™® Î©îÎâ¥ Ï∞æÍ∏∞
                        let parent = menuMap[item.top_menu_code];
                        if (parent) {
                            parent.children.push(menuItem);
                        }
                    }
                });
                menuInfoList = menuTree
                /* side nav */
                let sideNavMenuHtml = createSideNavMenuList(sideNavMenuList1Depth, sideNavMenuList2Depth, sideNavMenuList3Depth);
                $("#side_nav_menu").html(sideNavMenuHtml);
                sideNavTitleClick();
                existsNavSelected();
            } else {
                formUtil.alertPopup("response status is :" + status);
            }
        }).catch(error => {
            formUtil.alertPopup(error);
        })
    }

    //NOTE : ÏÇ¨Ïù¥Îìú ÎÑ§ÎπÑ Î©îÎâ¥Î¶¨Ïä§Ìä∏ ÏÉùÏÑ±
    function createSideNavMenuList(sideNavMenuList1Depth, sideNavMenuList2Depth, sideNavMenuList3Depth) {
        let sideNavMenuHtml = "";

        sideNavMenuList1Depth.map(menu1 => {
            sideNavMenuHtml += "<li class='gi-side-nav-menu-item gi-margin-bottom-26px'>"
                + "<a href='#' class='gi-side-nav-title collapsed' data-menu-level='" + menu1.menu_level + "' data-menu-code='" + menu1.menu_code + "'>"
                + "<i class='fa-inverse gi-side-nav-title-icon fa-solid " + menu1.menu_icon + "'></i>"
                + "<span>" + menu1.menu_name + "</span>"
                + "<span class='fa-solid fa-angle-right'></span>"
                + "</a>";

            if (formUtil.checkEmptyValue(sideNavMenuList2Depth)) {
                sideNavMenuList2Depth.map(menu2 => {
                    let list2Depth = "";
                    if (menu1.menu_code === menu2.top_menu_code) {
                        list2Depth += "<ul class='gi-side-nav-menu-level'>"
                            + "<li class='gi-side-nav-menu-item child'>"
                            + "<a href='#' class='gi-margin-left-5 gi-side-nav-title collapsed' data-menu-level='" + menu2.menu_level + "' data-menu-code='" + menu2.menu_code + "'>"
                            + "<span>" + menu2.menu_name + "</span>"
                            + "<span class='fa-solid fa-angle-right'></span>"
                            + "</a>";

                        if (formUtil.checkEmptyValue(sideNavMenuList3Depth)) {
                            let list3Depth = "<ul class='gi-side-nav-menu-level'>";
                            sideNavMenuList3Depth.map(menu3 => {
                                if (menu2.menu_code === menu3.top_menu_code) {
                                    list3Depth += "<li class='gi-margin-left-5 gi-side-nav-menu-item child'>"
                                        + "<a href='#' class='sideNavPageLoad gi-side-nav-title' data-prgm-url='" + menu3.prgm_url + "' data-page-name='" + menu3.url + "' data-menu-level='" + menu3.menu_level + "' data-menu-code='" + menu3.menu_code + "'>"
                                        + "<span>" + menu3.menu_name + "</span>"
                                        + "</a>"
                                        + "</li>";
                                }
                            });
                            list3Depth += "</ul>";
                            list2Depth += list3Depth
                                + "</li>"
                                + "</ul>";
                        }
                        sideNavMenuHtml += list2Depth;
                    }
                });
            }
            sideNavMenuHtml += "</li>";
        });

        return sideNavMenuHtml;
    }
    //NOTE : ÏÇ¨Ïù¥Îìú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÌÉÄÏù¥ÌãÄ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
    function sideNavTitleClick() {
        $('.gi-side-nav-title').off("click").on('click', function (e) {
            e.preventDefault();

            let $this = $(this);
            let $currentSubMenu = $this.nextAll(".gi-side-nav-menu-level");
            let menuLevel = $this.data("menu-level");
            let recentPageItem = common_session.getItem("recentPage");
            let recentPage = recentPageItem ? recentPageItem.url : "";

            // ÎπÑÌôúÏÑ±Ìôî Îêú Î©îÎâ¥ ÌÅ¥Î¶≠ Ïãú
            if (!$this.hasClass("active")) {
                // ÌôúÏÑ±Ìôî ÎêòÏßÄ ÏïäÏùÄ Î°úÎìú Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú
                if ($this.hasClass("sideNavPageLoad")) {
                    // 1. ÌòÑÏû¨ ÌÅ¥Î¶≠Ìïú ÌéòÏù¥ÏßÄÍ∞Ä ÏÜçÌïú Í≤ΩÎ°úÍ∞Ä ÏïÑÎãå Îã§Î•∏ 1ÎéÅÏä§ Î∏åÎûúÏπòÎì§ÏùÑ Î∂ÄÎìúÎüΩÍ≤å Ï†ïÎ¶¨
                    let $currentTopLi = $this.parents("li").last();
                    $("#side_nav_menu > li").not($currentTopLi).each(function () {
                        let $otherTopLi = $(this);
                        $otherTopLi.find("a.gi-side-nav-title.active").removeClass("active").addClass("collapsed");
                        $otherTopLi.find("ul.gi-side-nav-menu-level:visible").stop(true).slideUp(250);
                    });

                    // 2. ÌòÑÏû¨ Î∏åÎûúÏπò ÎÇ¥Ïùò Îã§Î•∏ ÌéòÏù¥ÏßÄ ÌïòÏù¥ÎùºÏù¥Ìä∏Îßå Ï†ïÎ¶¨ (Ïπ¥ÌÖåÍ≥†Î¶¨Îäî Ïú†ÏßÄ)
                    $currentTopLi.find(".sideNavPageLoad.active").removeClass("active page");

                    // 3. ÎßàÏßÄÎßâÏúºÎ°ú ÌÅ¥Î¶≠Ìïú Î≤ÑÌäº ÌôúÏÑ±Ìôî Î∞è ÌéòÏù¥ÏßÄ Î°úÎìú
                    $this.addClass("active page");
                    let url = $this.data("page-name");
                    let prgmUrl = $this.data("prgm-url");
                    let menuCode = $this.data("menu-code");
                    let urlInfo = { url: url }
                    common_session.setItem("recentPage", urlInfo);
                    common_session.setItem("activatedMenu", urlInfo);

                    let payload = url === "/bbs/view" ? { bbs_id: menuCode, bbs_nm: $this.text().trim() } : $this.text();
                    formUtil.apiLoadContent(prgmUrl, url, payload);
                } else {
                    // Ïπ¥ÌÖåÍ≥†Î¶¨(ÏÑúÎ∏åÎ©îÎâ¥) ÌéºÏπ® ÎèôÏûë - Îã§Î•∏ Í∞ôÏùÄ Î†àÎ≤®Ïùò ÏÑúÎ∏åÎ©îÎâ¥Îßå Î∂ÄÎìúÎüΩÍ≤å Îã´Í∏∞
                    $this.closest("ul").children("li").find("ul.gi-side-nav-menu-level:visible").not($currentSubMenu).stop(true).slideUp(250);
                    $this.closest("ul").children("li").find("a.gi-side-nav-title.active").not($this).removeClass("active").addClass("collapsed");

                    $currentSubMenu.stop(true).slideDown(250);
                    $this.removeClass("collapsed").addClass("active");
                }
            } else {
                // ÌôúÏÑ±Ìôî Îêú Î°úÎìú Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú
                if ($this.hasClass("sideNavPageLoad")) {
                    let url = $this.data("page-name");
                    let prgmUrl = $this.data("prgm-url");
                    let menuCode = $this.data("menu-code");
                    let urlInfo = { url: url }
                    common_session.setItem("recentPage", urlInfo);
                    common_session.setItem("activatedMenu", urlInfo);

                    let payload = url === "/bbs/view" ? { bbs_id: menuCode, bbs_nm: $this.text().trim() } : $this.text();
                    formUtil.apiLoadContent(prgmUrl, url, payload);
                } else {
                    // ÌôúÏÑ±Ìôî Îêú ÏµúÏÉÅÏúÑ Î©îÎâ¥ ÌÅ¥Î¶≠ Ïãú
                    if (menuLevel.toString() === "0") {
                        let allSubMenu = $this.closest('li').find('ul');

                        // Ï≤´Î≤àÏß∏ Î©îÎâ¥ Î≤ÑÌäºÏù¥Î©¥ÏÑú ÌïòÏúÑ Î°úÎìú Î≤ÑÌäºÏù¥ ÌôúÏÑ±Ìôî ÎêòÏñ¥ÏûàÏùÑ Îïå
                        if ($this.parent("li").find("a.active.page").length > 0) {
                            // ÌïòÏúÑ Î©îÎâ¥ Î≤ÑÌäºÍ≥º ÏòÅÏó≠Îì§ÏùÄ Ïà®ÍπÄ Ï≤òÎ¶¨ÌïòÏßÄÎßå Î°úÎìú Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî Ï≤òÎ¶¨Îäî ÌïòÏßÄ ÏïäÎäîÎã§.
                            allSubMenu.each(function (i, subMenu) {
                                let $menu = $(subMenu);
                                $menu.stop(true, true).slideUp(250);
                                $menu.find("a:not(.sideNavPageLoad)").removeClass("active").addClass("collapsed");
                            });
                            $this.removeClass("active").addClass("collapsed");
                        } else {
                            // Ï≤´Î≤àÏß∏ Î©îÎâ¥ Î≤ÑÌäºÏù¥Î©¥ÏÑú ÌïòÏúÑ Î°úÎìú Î≤ÑÌäºÏù¥ ÌôúÏÑ±Ìôî ÎêòÏñ¥ÏûàÏßÄ ÏïäÏùÑ Îïå
                            // ÌïòÏúÑ Î©îÎâ¥ Î≤ÑÌäºÍ≥º ÏòÅÏó≠Îì§ÏùÑ Ïà®ÍπÄ Ï≤òÎ¶¨ÌïòÎ©¥ÏÑú ÎπÑÌôúÏÑ±Ìôî Ï≤òÎ¶¨ÎèÑ ÌïúÎã§.
                            allSubMenu.each(function (i, subMenu) {
                                let $menu = $(subMenu);
                                $menu.stop(true, true).slideUp(250);
                                $menu.find(".gi-side-nav-title").removeClass("active");
                            });
                            $this.removeClass("active").addClass("collapsed");
                        }
                    } else {
                        // ÌôúÏÑ±Ìôî Îêú ÎëêÎ≤àÏß∏ Î©îÎâ¥ Î≤ÑÌäº ÏùºÎïåÎäî ÌïòÏúÑ ul Ïà®ÍπÄÏ≤òÎ¶¨ÌïòÍ≥† ÎπÑÌôúÏÑ±Ìôî(remove active) Ï≤òÎ¶¨
                        // ÎßåÏïΩ ÌïòÏúÑÏóê ÌôúÏÑ±Ìôî Îêú Î≤ÑÌäºÏù¥ ÏûàÎã§Î©¥ Ìï¥Îãπ Î≤ÑÌäºÏùÄ ÎπÑÌôúÏÑ±Ìôî ÌïòÏßÄÏïäÎäîÎã§.
                        if ($this.parent("li").find("a.active.page").length > 0) {
                            $this.removeClass("active").addClass("collapsed");
                            $currentSubMenu.stop(true, true).slideUp(150);
                        } else {
                            $this.removeClass("active").addClass("collapsed");
                            $currentSubMenu.stop(true, true).slideUp(150);
                        }
                    }
                }
            }
        });
    }
    function existsNavSelected() {
        let recentPageItem = common_session.getItem("recentPage");
        let recentPage = recentPageItem ? recentPageItem.url : null;
        if (formUtil.checkEmptyValue(recentPage)) {
            formUtil.activatedMenu(recentPage);
        } else {
            let allLiButtonList = $("#side_nav_menu > li");
            allLiButtonList.each(function () {
                let $button = $(this);
                $button.find("a:not(.sideNavPageLoad)").removeClass("active").addClass("collapsed");
                $button.find("a.sideNavPageLoad").removeClass("active page");
                $button.find("ul").hide(); // Ï¥àÍ∏∞ Î°úÎìú ÏãúÏóêÎäî Ïï†ÎãàÎ©îÏù¥ÏÖò ÏóÜÏù¥ Ï¶âÏãú Ïà®ÍπÄ
            });
        }
    }
    //NOTE: ÎÇ¥Ï†ïÎ≥¥ ÏàòÏ†ï
    $("#myinfo-btn").off("click").on("click", function (e) {
        e.preventDefault();
        let url = "/user/myinfo";
        dropDownMenu("close");
        formUtil.apiLoadContent("cms", url, "");
        allCloseMenuTitle();
    });
    //NOTE: Î™®Îì† Îß§Îâ¥ Îã´Í∏∞
    function allCloseMenuTitle() {
        let sideNavTitleVolume = $(".gi-side-nav-menu-item").find(".gi-side-nav-title");
        let sideNavMenuLevelVolume = $(".gi-side-nav-menu-item").find(".gi-side-nav-menu-level");
        sideNavTitleVolume.map((index, item) => {
            if ($(item).hasClass("active")) {
                $(item).removeClass("active");
                $(item).addClass("collapsed");
            }

            if ($(item).hasClass("page")) {
                $(item).removeClass("page");
            }
        })
        sideNavMenuLevelVolume.map((index, item) => {
            $(item).css("display", "none");
        })
    }

    //NOTE: DropDownMenuÎ•º Ï†úÏô∏Ìïú Î∂ÄÎ∂ÑÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ DropDownMenu ÎπÑÌôúÏÑ±Ìôî Ï≤òÎ¶¨
    function isDropMenuOpenSetClose() {
        let flag = $(".side-nav-profile-dropdown").hasClass("active");
        if (flag) {
            $(document).off("click.unOtherAreaClickEventHandler").on("click.unOtherAreaClickEventHandler", function (e) {
                unOtherAreaClickEventHandler(e);
            });

        }
        function unOtherAreaClickEventHandler(e) {
            if (!$(e.target).closest(".dropdown-menu , .side-nav-profile-dropdown").length) {
                dropDownMenu("close");
            }
        }
    }

    /**
     * NOTE: Ïñ∏Ïñ¥ ÏÑ†ÌÉù ÏÑ∏Í∑∏Î®ºÌä∏ Ïª®Ìä∏Î°§ Ï¥àÍ∏∞Ìôî
     */
    function initLanguageSelector() {
        const $languageToggle = $("#languageToggle");
        const $slider = $("#languageSlider");
        const $options = $(".gi-language-option");
        const $currentLangCode = $("#currentLangCode");

        // Ïñ∏Ïñ¥ ÏΩîÎìú Îß§Ìïë
        const langCodeMap = {
            ko: "KO",
            mn: "MN",
            en: "EN"
        };

        // Ï†ÄÏû•Îêú Ïñ∏Ïñ¥ ÏÑ§Ï†ï Î≥µÏõê
        const savedLang = localStorage.getItem("selectedLanguage") || "ko";
        setActiveLanguage(savedLang);

        // Ïñ∏Ïñ¥ ÏòµÏÖò ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
        $options.on("click", function () {
            const $this = $(this);
            const lang = $this.data("lang");

            setActiveLanguage(lang);
            localStorage.setItem("selectedLanguage", lang);

            // Ïñ∏Ïñ¥ Î≥ÄÍ≤Ω Ïù¥Î≤§Ìä∏ Î∞úÏÉù (Îã§Î•∏ Ïª¥Ìè¨ÎÑåÌä∏ÏóêÏÑú ÏÇ¨Ïö© Í∞ÄÎä•)
            $(document).trigger("languageChanged", [lang]);

            // ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ® (Ïñ∏Ïñ¥ Ï†ÅÏö©)
            setTimeout(() => location.reload(), 300);
        });

        // Ïñ∏Ïñ¥ Ìä∏Î¶¨Í±∞ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
        $("#languageTrigger").on("click", function (e) {
            e.stopPropagation();
            $(".gi-home-setting-article").toggleClass("lang-panel-closed");
        });

        // ÏÑ§Ï†ï ÏòÅÏó≠ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
        $(document).on("click", function (e) {
            if (!$(e.target).closest("#languageTrigger, .gi-home-setting-article").length) {
                $(".gi-home-setting-article").addClass("lang-panel-closed");
            }
        });

        function setActiveLanguage(lang) {
            const $targetOption = $options.filter(`[data-lang="${lang}"]`);
            const index = $options.index($targetOption);

            // ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
            $options.removeClass("active");
            $targetOption.addClass("active");

            // Ïä¨ÎùºÏù¥Îçî ÏúÑÏπò Î≥ÄÍ≤Ω
            $slider.removeClass("position-0 position-1 position-2");
            $slider.addClass(`position-${index}`);

            // ÌòÑÏû¨ Ïñ∏Ïñ¥ ÏΩîÎìú ÏóÖÎç∞Ïù¥Ìä∏
            $currentLangCode.text(langCodeMap[lang] || "KO");
        }
    }
</script>