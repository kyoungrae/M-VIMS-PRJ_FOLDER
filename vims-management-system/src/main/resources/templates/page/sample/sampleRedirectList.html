<article id="sampleListPage" class="gi-article-content gi-col-95 gi-row-100">
  <section class="gi-col-100 gi-row-100 gi-overflow-scroll">

    <!-- 페이지 헤더 -->
    <header class="gi-margin-bottom-40px gi-padding-left-20px gi-padding-top-20px">
      <h1 class="gi-page-title">[Page.Message].Message.Label.Array["SAMPLE_TITLE_LIST"]</h1>
      <p class="gi-subtitle-main">[Page.Message].Message.Label.Array["SUB_SAMPLE_TITLE_LIST"]</p>
    </header>

    <article>
      <!-- 검색기능 영역 -->
      <div id="search-area" class="gi-padding-left-right-20px gi-margin-bottom-30px">
        <div class="gi-flex gi-flex-align-items-center gi-grid-gap-20px">
          <div class="gi-input-container gi-flex-1">
            <label for="searchDesc1" class="gi-input-label"
              data-focus-label="true">[Page.Message].Message.Label.Array["SAMPLE.SEARCH_KEYWORD"]</label>
            <input class="gi-input" type="text" id="searchDesc1" name="searchDesc1" autocomplete="off" />
          </div>

          <div class="gi-input-container gi-flex-1">
            <label for="from_date" class="gi-input-label"
              data-focus-label="true">[Page.Message].Message.Label.Array["START_DATE"]</label>
            <input id="from_date" class="gi-input" type="text" name="from_date" autocomplete="off" data-datepicker />
          </div>

          <div class="gi-input-container gi-flex-1">
            <label for="to_date" class="gi-input-label"
              data-focus-label="true">[Page.Message].Message.Label.Array["END_DATE"]</label>
            <input id="to_date" class="gi-input" type="text" name="to_date" autocomplete="off" data-datepicker />
          </div>

          <div class="gi-flex gi-grid-gap-10px">
            <button id="search-btn" class="gi-btn-blue"
              type="button">[Page.Message].Message.Label.Array["SEARCH_BTN"]</button>
            <button id="reset-btn" class="gi-btn" type="button">[Page.Message].Message.Label.Array["RESET_BTN"]</button>
          </div>
        </div>
      </div>
      <!--/ 검색기능 영역 -->

      <!-- 그리드 영역 -->
      <div id="tab-content-0" class="tab-content">
        <div class="gi-row-100 gi-padding-left-right-20px gi-flex gi-grid-gap-20px">
          <div id="sampleList_gi-Grid" class="gi-Grid gi-col-100"></div>
          <div id="sample_gi-Grid-side" class="gi-Grid-side" data-side-grid-open="false"></div>
        </div>
      </div>
      <!--/ 그리드 영역 -->
      <!--      등록버튼 영역      -->
      <div class="gi-row-100">
        <div class="gi-btn-section gi-row-30 gi-float-right gi-padding-left-right-20px">
          <button id="insert-btn" class="gi-btn-blue gi-float-right " type="button"
            gi-popup-open-id="register_sample_popup">[Page.Message].Message.Label.Array["REGISTER_BTN"]</button>
        </div>
      </div>
      <!--/     추가버튼 영역      -->
    </article>
  </section>
</article>

<script type="text/javascript">
  var PRGMID = "sampleListPage";	//page id
  init();
  function init() {
    //초기화
    resetEvent();

    //페이지 초기설정
    new PageInit();

    //데이터 조회
    findBySampleList();

    setTimeout(function () {
      //클릭 이벤트
      clickEvent();
    });
  }

  function resetEvent() {
    //검색영역 값 초기화
    $("#search-area input").val("");
    $("#search-area select").val("");

    //데이터 호출 후 이벤트 재설정
    new AfterLoadDataEvent();
  }

  //클릭 이벤트
  function clickEvent() {
    // 초기화버튼 클릭 이벤트
    $("#reset-btn").click(function () {
      resetEvent();
      findBySampleList();
    });
    //조회버튼 클릭 이벤트
    $("#search-btn").click(function () {
      findBySampleList();
    });

    $("#insert-btn").off("click").on("click", function () {
      registerSampleRedirect();
    });
  }
  function findBySampleList(page, range, sortId, sortOrder) {
    //default page
    if (!formUtil.checkEmptyValue(page)) page = 1;
    //default range(row)
    if (!formUtil.checkEmptyValue(range)) range = 10;

    // let url = "/cms/common/sysUser/findPage";
    let param = {
      page_no: page,
      row_range: range,
      offset: (page - 1) * range
    };
    // 검색조건 설정 (추가해서 사용)
    let cont1 = $("#searchDesc1").val();
    let cont2 = $("#from_date").val();
    let cont3 = $("#to_date").val();
    if (formUtil.checkEmptyValue(cont1)) param.searchDesc1 = cont1;
    if (formUtil.checkEmptyValue(cont2)) param.from_date = cont2;
    if (formUtil.checkEmptyValue(cont3)) param.to_date = cont3;

    // 정렬조건추가 (기준id, 순서)
    if (formUtil.checkEmptyValue(sortId)) param.sort_id = sortId;
    if (formUtil.checkEmptyValue(sortOrder)) param.sort_order = sortOrder;

    // axios.post(url, param).then(response => {
    // let status = response.status;
    // if (status === 200) {
    // let data = response.data.DATA;
    // let paging = response.data.TOTAL_PAGING[0];
    let allData = [];
    for (let i = 0; i < 100; i++) {
      allData.push({
        "no": i + 1,
        "use_yn": i % 2 === 0 ? "1" : "0",
        "test2": i % 2 === 0 ? "1" : "0",
        "test3": i + 1,
        "test4": i + 1,
        "test5": i + 1,
        "test6": i + 1,
        "test7": i + 1,
        "test8": i + 1,
        "test9": i + 1,
        "test10": i + 1,
      });
    }

    let start = (page - 1) * range;
    let end = start + range;
    let data = allData.slice(start, end);

    let paging = {
      "page_no": page,
      "row_range": range,
      "offset": start,
      "total_count": allData.length,
      "total_page": Math.ceil(allData.length / range)
    };
    // 그리드 헤더 설정
    let sample_menuGrid_header = {
      title: '[Page.Message].Message.Label.Array["SAMPLE.TITLE"]',
      list: [
        { HEADER: 'No', ID: 'no', WIDTH: '7', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: 'test1', ID: 'use_yn', WIDTH: '7', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', SYS_CODE_GROUP_ID: "USE_YN", HIDDEN: false }, // 공통코드 치환
        { HEADER: 'test2', ID: "test2", WIDTH: "5", TYPE: "button", FONT_SIZE: "12px", TEXT_ALIGN: "center", VISIBLE_OPTION_BTN: [{ "test2": "0" }], HIDDEN: false }, // 조건에 따라 버튼 표시
        { HEADER: 'test3', ID: 'test3', WIDTH: '7', TYPE: 'password', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false }, // 비밀번호
        { HEADER: 'test4', ID: 'test4', WIDTH: '7', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: 'test5', ID: 'test5', WIDTH: '7', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: 'test6', ID: 'test6', WIDTH: '7', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: 'test7', ID: 'test7', WIDTH: '7', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: 'test8', ID: 'test8', WIDTH: '7', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: 'test9', ID: 'test9', WIDTH: '7', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: 'test10', ID: 'test10', WIDTH: '7', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: '[Page.Message].Message.Label.Array["DETAIL_BTN"]', ID: 'detail_btn', WIDTH: '15', TYPE: 'button', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: '[Page.Message].Message.Label.Array["UPDATE_BTN"]', ID: 'update_btn', WIDTH: '15', TYPE: 'button', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: '[Page.Message].Message.Label.Array["SIDE_BTN"]', ID: 'side_btn', WIDTH: '15', TYPE: 'button', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: '[Page.Message].Message.Label.Array["DELETE_BTN"]', ID: 'delete_btn', WIDTH: '15', TYPE: 'button', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
        { HEADER: 'checkbox', ID: 'checkbox', WIDTH: '15', TYPE: 'checkbox', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false }
      ]
    }
    let sample_grid = formUtil.giGrid(sample_menuGrid_header, paging.total_page, page, "sampleList_gi-Grid");

    //그리드 하이라키 구조로 변경
    //let sample_grid = formUtil.giGridHierarchy(sysUser_menuGrid_header,paging,page,"sysUser_gi-Grid");
    //sample_grid.HierarchyOption({level_column:"",parent_depth_column:"",child_depth_column:""});


    sample_grid.excelDownloadEvent("test");
    sample_grid.excelUploadEvent("test");
    //사이드 그리드 설정
    sample_grid.sideOpenBtnClick("sample_gi-Grid-side", "side_btn", function (data) {
      console.log("Side Panel Data:", data);

      // 1. 사이드 패널 내 그리드 컨테이너 생성
      $("#sample_gi-Grid-side").html('<div class="gi-padding-20px gi-row-100 gi-flex gi-flex-direction-column gi-grid-gap-10px">' +
        '<h3>[' + data.no + '] ' + Message.Label.Array["SYS_BBS_BOARD.DETAIL"] + '</h3>' +
        '<div id="sampleSub_gi-Grid" class="gi-Grid gi-row-100"></div>' +
        '</div>');

      // 2. 서브 그리드 헤더 설정
      let subGridHeader = {
        title: Message.Label.Array["SYS_BBS_BOARD.DETAIL"],
        list: [
          { HEADER: 'No', ID: 'sub_no', WIDTH: '10', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'center', HIDDEN: false },
          { HEADER: Message.Label.Array["FILE_NAME"], ID: 'item_name', WIDTH: '40', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'left', HIDDEN: false },
          { HEADER: Message.Label.Array["SYS_BBS_BOARD.CONTENT"], ID: 'item_content', WIDTH: '50', TYPE: 'text', FONT_SIZE: '12px', TEXT_ALIGN: 'left', HIDDEN: false }
        ]
      };

      // 3. 서브 그리드 데이터 생성 (샘플)
      let subData = [];
      for (let i = 1; i <= 5; i++) {
        subData.push({
          sub_no: i,
          item_name: Message.Label.Array["SYS_BBS_BOARD.DETAIL"] + " " + data.no + "-" + i,
          item_content: Message.Label.Array["SYS_BBS_BOARD.CONTENT"] + " " + data.no + "-" + i
        });
      }

      // 4. 서브 그리드 초기화 및 데이터 바인딩
      let sub_grid = formUtil.giGrid(subGridHeader, 1, 1, "sampleSub_gi-Grid");
      sub_grid.DataSet(subData);
    });

    //그리드 데이터 설정
    sample_grid.DataSet(data);

    //그리드 row 개수 변경 및 페이징 버튼 이벤트 설정
    sample_grid.pagingSet(findBySampleList);

    //그리드 내부의 상세 버튼 클릭 이벤트(상세 팝업 호출) 설정(버튼클릭시 호출될 함수, 그리드 헤더 부분에 설정한 버튼 ID)
    sample_grid.detailBtnClick(sampleDetailRedirect, "detail_btn");


    //그리드 내부의 수정 버튼 클릭 이벤트(수정 팝업 호출) 설정(버튼클릭시 호출될 함수, 그리드 헤더 부분에 설정한 버튼 ID)
    sample_grid.detailBtnClick(sampleUpdateRedirect, "update_btn");

    //그리스 내부의 header click 정렬 이벤트 설정
    sample_grid.sortDataSet(findBySampleList);

    //그리드 row 선택 이벤트 설정
    sample_grid.rowClick(sampleRowClickEvent);

    //그리드 row Double click 이벤트 설정
    sample_grid.rowDoubleClick(sampleRowDoubleClickEvent);

    //그리드 checkbox click 이벤트 설정
    sample_grid.rowCheckboxClick(sampleRowCheckboxClick);

    //그리드 row MultiSelect click 이벤트 설정
    sample_grid.rowMultiSelectClick(sampleRowMultiSelectClick);

    //그리드 row MultiSelect click 이벤트 설정
    sample_grid.gridColumResize("sampleList_gi-Grid")

    function sampleRowMultiSelectClick(rows) {
      console.log(rows);
    }

    function sampleRowCheckboxClick(rows) {
      console.log(rows);
    }

    function sampleRowClickEvent(rows) {
      console.log(rows);
    }
    function sampleRowDoubleClickEvent(rows) {
      console.log(rows);
    }
    // } else {
    // formUtil.toast("response status is :" + status);
    // }
    // }).catch(error => {
    //   formUtil.toast(error);

    // })
  }

  //FUN : 상세페이지 이동
  function sampleDetailRedirect(redirectDataList) {
    let url = "/sample/sampleDetail";
    console.log(redirectDataList);
    //이전페이지 아이디 설정
    redirectDataList["pre_page_id"] = "/sample/sampleList";
    formUtil.apiLoadContent("/cms", url, redirectDataList);
  }

  //FUN : 수정페이지 이동
  function sampleUpdateRedirect(redirectDataList) {
    let url = "/sample/sampleModify";

    //이전페이지 아이디 설정
    redirectDataList["pre_page_id"] = "/sample/sampleList";
    formUtil.apiLoadContent("/cms", url, redirectDataList);
  }

  //FUN : 등록페이지 이동
  function registerSampleRedirect() {
    let url = "/sample/sampleRegister";

    //이전페이지 아이디 설정
    let redirectDataList = {};
    redirectDataList["pre_page_id"] = "/sample/sampleList";
    formUtil.apiLoadContent("/cms", url, redirectDataList);
  }

  //FUN : 사용자 수정
  function updateSampleRedirect(redirectDataList) {
    let url = "/sample/sampleUpdate";

    //이전페이지 아이디 설정
    redirectDataList["pre_page_id"] = "/sample/sampleList";
    formUtil.apiLoadContent("/cms", url, redirectDataList);
  }

</script>