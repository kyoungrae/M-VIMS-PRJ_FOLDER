<article id="sysUserModifyPage" class="gi-article-content gi-col-95 gi-row-100">
    <section class="gi-col-100 gi-row-100 gi-overflow-scroll">
        <div class="gi-container-narrow">

            <!-- íŽ˜ì´ì§€ í—¤ë” -->
            <header class="gi-margin-bottom-40px">
                <h1 class="gi-font-size-36px gi-title-main">[Page.Message].Message.Label.Array["SYS_USER.TITLE_UPDATE"]</h1>
                <p class="gi-subtitle-main">[Page.Message].Message.Label.Array["SYS_USER.SUB_TITLE_UPDATE"]</p>
            </header>

            <form id="sysUserModifyFrom">

                <!-- [ê¸°ë³¸ ì •ë³´ ì¹´ë“œ] -->
                <div class="gi-article-content gi-margin-bottom-30px">
                    <h2 class="gi-title-section">[Page.Message].Message.Label.Array["SYS_USER.INFO"]</h2>
                    <div class="gi-flex gi-flex-column gi-grid-gap-20px">

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="id" class="gi-input-label" data-focus-label="true"
                                    data-required="true">[Page.Message].Message.Label.Array["SYS_USER.ID"]</label>
                               <input data-field="id" id="id" name="id" class="gi-input" data-focus-span-text-align="center" data-required="true" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="email" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.EMAIL"]</label>
                               <input data-field="email" id="email" name="email" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="password" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.PASSWORD"]</label>
                               <input data-field="password" id="password" name="password" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="role" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.ROLE"]</label>
                               <input data-field="role" id="role" name="role" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="user_id" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.USER_ID"]</label>
                               <input data-field="user_id" id="user_id" name="user_id" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="office_code" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.OFFICE_CODE"]</label>
                               <input data-field="office_code" id="office_code" name="office_code" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="system_create_userid" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.SYSTEM_CREATE_USERID"]</label>
                               <input data-field="system_create_userid" id="system_create_userid" name="system_create_userid" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="system_create_date" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.SYSTEM_CREATE_DATE"]</label>
                               <input data-field="system_create_date" id="system_create_date" name="system_create_date" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="system_update_userid" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.SYSTEM_UPDATE_USERID"]</label>
                               <input data-field="system_update_userid" id="system_update_userid" name="system_update_userid" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="system_update_date" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.SYSTEM_UPDATE_DATE"]</label>
                               <input data-field="system_update_date" id="system_update_date" name="system_update_date" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="user_name" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.USER_NAME"]</label>
                               <input data-field="user_name" id="user_name" name="user_name" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="tel" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.TEL"]</label>
                               <input data-field="tel" id="tel" name="tel" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="address" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.ADDRESS"]</label>
                               <input data-field="address" id="address" name="address" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="address_detail" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.ADDRESS_DETAIL"]</label>
                               <input data-field="address_detail" id="address_detail" name="address_detail" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="postal_code" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.POSTAL_CODE"]</label>
                               <input data-field="postal_code" id="postal_code" name="postal_code" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                        <div class="gi-flex gi-grid-gap-20px">
                            <div class="gi-input-container gi-flex-1">
                                <label for="uuid" class="gi-input-label" data-focus-label="true"
                                    data-required="false">[Page.Message].Message.Label.Array["SYS_USER.UUID"]</label>
                               <input data-field="uuid" id="uuid" name="uuid" class="gi-input" data-focus-span-text-align="center" data-required="false" autocomplete="off"/>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- [íŒŒì¼ ì²¨ë¶€ ì¹´ë“œ] -->
                <div class="gi-article-content gi-margin-bottom-30px">
                    <h2 class="gi-title-section">[Page.Message].Message.Label.Array["FILE_ATTACH"]</h2>
                    <div class="gi-flex gi-flex-column gi-grid-gap-10px">
                        <div class="gi-flex gi-flex-align-items-center gi-grid-gap-20px">
                            <!-- UUID ìž…ë ¥ì°½ì€ ìˆ¨ê¹€ ì²˜ë¦¬ -->
                            <input data-field="file_uuid" id="file_uuid" name="file_uuid" class="gi-hidden"
                                readonly />

                            <div class="gi-flex-1">
                                <p class="gi-text-secondary gi-font-size-14px">
                                    [Page.Message].Message.Label.Array["FILE_ATTACH_INFO"]
                                </p>
                            </div>
                            <button id="file-upload-btn" class="gi-btn-blue" type="button" data-file-upload-btn>[Page.Message].Message.Label.Array["FILE_REGISTER_BTN"]</button>
                        </div>

                        <!-- íŒŒì¼ ëª©ë¡ í‘œì‹œ ì˜ì—­ -->
                        <div id="attached-file-list" class="gi-margin-top-10px"
                            style="min-height: 50px; border: 1px solid #f0f1f7; border-radius: 12px; padding: 16px; background: #f8f9fc;">
                            <div class="gi-file-list-empty"> <span class="gi-file-list-empty-icon">ðŸ“‚</span> <p class="gi-file-list-empty-text">[Page.Message].Message.Label.Array["FILE_ATTACH_AREA_NOT_EXIST_FILE"]</p> </div>
                        </div>
                    </div>
                </div>

                <!-- ë²„íŠ¼ ì˜ì—­ -->
                <div class="gi-flex gi-flex-justify-content-center gi-grid-gap-16px gi-margin-top-40px">
                    <button id="modify-btn" class="gi-btn-blue gi-btn-modern-update" type="button">[Page.Message].Message.Label.Array["UPDATE_BTN"]</button>
                </div>

            </form>
        </div>
    </section>
</article>
<script type="text/javascript">
    var PRGMID = "sysUserModifyPage";	//page id
    var PRGFID = "sysUserModifyForm";	//form id
    init();


    function init(){

        //ì´ˆê¸°í™”
        resetEvent();

        setTimeout(function(){
            //íŽ˜ì´ì§€ ì´ˆê¸°ì„¤ì •
            new PageInit();
            //í´ë¦­ ì´ë²¤íŠ¸
            clickEvent();
        });

    }

    //ë¦¬ìŠ¤íŠ¸ì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„° ë°”ì¸ë”©ì²˜ë¦¬
    async function dataSetting(){
        await dataBinding.setData(PRGFID);
        let data = dataBinding.getData(PRGFID);

        //ì´ˆê¸° ê°’ ì…‹íŒ…
        initValueSetting(data);
    }

    function resetEvent(){
        //ë°ì´í„° í˜¸ì¶œ í›„ ì´ë²¤íŠ¸ ìž¬ì„¤ì •
        new AfterLoadDataEvent();
    }

    //í´ë¦­ ì´ë²¤íŠ¸
    function clickEvent(){
        // ì´ˆê¸°í™” ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        $("#modify-reset-btn").click(function(){

        });
        //ë’¤ë¡œê°€ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        //$("#back-btn").click(function(){
        //    redirectBackPage();
        //})
        //ìˆ˜ì •í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        $("#modify-btn").click(function(){
            sysUserModify();
        })
    }
    function initValueSetting(data){
        // select option ì´ˆê¸°í™”
        //input.setSelectOption("#sample_category", "/cms/common/sysCode/find", { code: "code_id", name: "code_name" });

        // íŒŒì¼ ì—…ë¡œë“œ ì´ˆê¸°í™” - ìˆ˜ì • ë¡œì§ ë§Œë“¤ì–´ì•¼í•¨;;
        fileUtil.createFileUpload("/fms/common/file/sysFileDetail", "file_uuid", "sampleFolder");
    }
    function sysUserModify(){
        let flag =  sysUserModifyCheckValidation();
        if(flag){
            let data = dataBinding.getData(PRGFID);
            let url = "/cms/common/sysUser/update";
                //console.log(data);
            let param = {

                id : data.id ,
                email : data.email ,
                password : data.password ,
                role : data.role ,
                user_id : data.user_id ,
                office_code : data.office_code ,
                system_create_userid : data.system_create_userid ,
                system_create_date : data.system_create_date ,
                system_update_userid : data.system_update_userid ,
                system_update_date : data.system_update_date ,
                user_name : data.user_name ,
                tel : data.tel ,
                address : data.address ,
                address_detail : data.address_detail ,
                postal_code : data.postal_code ,
                uuid : data.uuid 
            };
            axios.post(url,param).then(response =>{
                let status = response.status;
                if (status === 200) {
                    formUtil.toast(Message.Label.Array["COMPLETE.UPDATE"],"success");
                    redirectBackPage();
                } else {
                    formUtil.toast("response status is :" + status, "error");
                }
            }).catch(error => {
                formUtil.toast(error.response.data, "error");
            })
        }
    }
    function sysUserModifyCheckValidation(){
        return formUtil.validationCheck(PRGFID,"SYS_USER.CHECK.");
    }
    //function redirectBackPage(){
    //    formUtil.loadContent("/cms/sysUserDetail", "");
    //}
</script>